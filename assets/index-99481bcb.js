import{i as B,$ as F,m as z,c as I,q as M,l as O,H as $,a as j}from"./use-translate-00443182.js";import{u as X}from"./use-touch-d246739c.js";import{u as G}from"./use-expose-0d8d1cf9.js";import{A as H,y as _,H as J,D,e as l,r as K,o as Q,a as Y,w as r,C as t,F as Z}from"./vue-libs-dcfba01b.js";import{c as ee,n as E,w as te}from"./with-install-dbef9c21.js";import{c as oe}from"./interceptor-85295833.js";import{V as p}from"./index-a830d612.js";import{V as R}from"./index-b3d98cd2.js";import{V as le}from"./index-13522585.js";import{c as ae}from"./index-2630be1a.js";import{a as ne}from"./function-call-b42ff895.js";import"./constant-ee6e27d7.js";import"./use-route-dfd2aa0a.js";import"./index-b2bd89b1.js";import"./index-de8b7548.js";import"./index-50f1a2e4.js";import"./index-385d75b4.js";import"./index-83675f9b.js";import"./mount-component-1e01ff48.js";import"./index-517d7c97.js";import"./use-lock-scroll-089554f3.js";import"./use-lazy-render-ac91aad5.js";import"./on-popup-reopen-f7cdcc35.js";import"./index-466fc7b5.js";import"./index-7ae6ddf3.js";import"./use-placeholder-2806286f.js";import"./use-height-dbe1d011.js";const[se,b]=I("swipe-cell"),re={name:ee(""),disabled:Boolean,leftWidth:E,rightWidth:E,beforeClose:Function,stopPropagation:Boolean},ie=H({name:se,props:re,emits:["open","close","click"],setup(a,{emit:o,slots:m}){let i,u,d;const f=_(),w=_(),y=_(),n=J({offset:0,dragging:!1}),g=X(),k=e=>e.value?M(e).width:0,h=D(()=>B(a.leftWidth)?+a.leftWidth:k(w)),C=D(()=>B(a.rightWidth)?+a.rightWidth:k(y)),T=e=>{n.offset=e==="left"?h.value:-C.value,i||(i=!0,o("open",{name:a.name,position:e}))},v=e=>{n.offset=0,i&&(i=!1,o("close",{name:a.name,position:e}))},N=e=>{const s=Math.abs(n.offset),c=.15,A=i?1-c:c,q=e==="left"?h.value:C.value;q&&s>q*A?T(e):v(e)},L=e=>{a.disabled||(d=n.offset,g.start(e))},U=e=>{if(a.disabled)return;const{deltaX:s}=g;g.move(e),g.isHorizontal()&&(u=!0,n.dragging=!0,(!i||s.value*d<0)&&O(e,a.stopPropagation),n.offset=$(s.value+d,-C.value,h.value))},S=()=>{n.dragging&&(n.dragging=!1,N(n.offset>0?"left":"right"),setTimeout(()=>{u=!1},0))},W=(e="outside")=>{o("click",e),i&&!u&&oe(a.beforeClose,{args:[{name:a.name,position:e}],done:()=>v(e)})},P=(e,s)=>c=>{s&&c.stopPropagation(),W(e)},V=(e,s)=>{const c=m[e];if(c)return l("div",{ref:s,class:b(e),onClick:P(e,!0)},[c()])};return G({open:T,close:v}),F(f,()=>W("outside"),{eventName:"touchstart"}),z("touchmove",U,{target:f}),()=>{var s;const e={transform:`translate3d(${n.offset}px, 0, 0)`,transitionDuration:n.dragging?"0s":".6s"};return l("div",{ref:f,class:b(),onClick:P("cell",u),onTouchstartPassive:L,onTouchend:S,onTouchcancel:S},[l("div",{class:b("wrapper"),style:e},[V("left",w),(s=m.default)==null?void 0:s.call(m),V("right",y)])])}}}),ce=te(ie),x=ce,Le=H({__name:"index",setup(a){const o=j({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),m=ae("ipad.jpeg"),i=({position:u})=>{switch(u){case"left":case"cell":case"outside":return!0;case"right":return new Promise(d=>{ne({title:o("confirm")}).then(()=>{d(!0)})})}};return(u,d)=>{const f=K("demo-block");return Q(),Y(Z,null,[l(f,{title:t(o)("basicUsage")},{default:r(()=>[l(t(x),null,{left:r(()=>[l(t(p),{square:"",type:"primary",text:t(o)("select")},null,8,["text"])]),right:r(()=>[l(t(p),{square:"",type:"danger",text:t(o)("delete")},null,8,["text"]),l(t(p),{square:"",type:"primary",text:t(o)("collect")},null,8,["text"])]),default:r(()=>[l(t(R),{border:!1,title:t(o)("title"),value:t(o)("content")},null,8,["title","value"])]),_:1})]),_:1},8,["title"]),l(f,{title:t(o)("customContent")},{default:r(()=>[l(t(x),null,{right:r(()=>[l(t(p),{square:"",type:"danger",class:"delete-button",text:t(o)("delete")},null,8,["text"])]),default:r(()=>[l(t(le),{num:"2",price:"2.00",desc:t(o)("desc"),title:t(o)("cardTitle"),thumb:t(m)},null,8,["desc","title","thumb"])]),_:1})]),_:1},8,["title"]),l(f,{title:t(o)("beforeClose")},{default:r(()=>[l(t(x),{"before-close":i},{left:r(()=>[l(t(p),{square:"",type:"primary",text:t(o)("select")},null,8,["text"])]),right:r(()=>[l(t(p),{square:"",type:"danger",text:t(o)("delete")},null,8,["text"])]),default:r(()=>[l(t(R),{border:!1,title:t(o)("title"),value:t(o)("content")},null,8,["title","value"])]),_:1})]),_:1},8,["title"])],64)}}});export{Le as default};
